<!-- TODO styling here needs some TLC as well -->
<div class="container">
  <div class="row justify-content-center">
    <ul class="list-group">
      <li class="list-group-item">
        TODO: do something about these links and their visibility
      </li>
      <li class="list-group-item">
        TODO: probably get rid of the flash alert with the room link
      </li>
      <li class="list-group-item">
        <%= link_to "Register Now To Claim Room", new_user_registration_path(room: @room.name) %>
      </li>
      <li class="list-group-item">
        <%= link_to "Make Public", toggle_status_room_path(status: :unrestricted) %>
      </li>
      <li class="list-group-item">
        <%= link_to "Make Private", toggle_status_room_path(status: :restricted) %>
      </li>
      <li class="list-group-item">
        <%= link_to "Claim Room", claim_room_path %>
      </li>
      <li class="list-group-item">
        <%= link_to "Add Password", edit_room_path %>
      </li>
      <li class="list-group-item">
        click to copy
        <input class="form-control" id="copyRoomName" type="text" value='<%= "https://webrtc-on-rails.herokuapp.com/rooms/#{@room.slug}" %>' />
      </li>
      <li class="list-group-item">
        <%= @room.inspect %>
      </li>
    </ul>
  </div>

  <div class="row">
    <span id="room-name" data-room='<%= @room.slug %>'></span>
    <span id="xirsys-creds" data-xirsys='<%= @json_response && @json_response.html_safe %>'></span>
    <span id="currentUser" data-email='<%= @user.email %>'></span>

    <div id="remoteViewContainer"></div>


    <div id="localViewContainer">
      <video id="selfView" autoplay></video>
    </div>


    <div id="join-btn-container">
      <button onclick="handleJoinSession()" class="btn btn-success">
        Join Room
      </button>
    </div>

    <div id="leave-btn-container">
      <button onclick="handleLeaveSession()" class="btn btn-danger">
        Leave Room
      </button>
    </div>
  </div>
</div>

<% content_for :page_js do %>
  <script type="text/javascript">
    <%= render file: "#{Rails.root}/app/views/rooms/js/webrtc.js" %>
  </script>
<% end %>
